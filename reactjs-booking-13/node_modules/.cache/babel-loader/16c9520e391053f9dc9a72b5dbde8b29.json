{"ast":null,"code":"import axios from \"axios\";\nimport { GET_LIST_TICKET } from \"../constants/booking.constant\";\n\nconst getTicketListAction = ticketList => {\n  return {\n    type: GET_LIST_TICKET,\n    payload: ticketList\n  };\n};\n\nexport const getTicketListAPI = code => {\n  return async dispatch => {\n    //   c1 - promise\n    // axios({\n    //   method: \"GET\",\n    //   url: `https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=16099`,\n    // })\n    //   .then((res) => {\n    //     console.log(res);\n    //     dispatch(getTicketListAction(res.data));\n    //   })\n    //   .catch((err) => {\n    //     console.log(err);\n    //   });\n    //   c2 - async / await\n    try {\n      const res = await axios({\n        method: \"GET\",\n        url: `https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${code}`\n      });\n      dispatch(getTicketListAction(res.data));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const bookingTicketAPI = (maLichChieu, danhSachVe) => {\n  return async dispatch => {\n    try {\n      const user = JSON.parse(localStorage.getItem(\"userLogin\"));\n      const res = await axios({\n        method: \"POST\",\n        url: \"https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/DatVe\",\n        data: {\n          maLichChieu,\n          danhSachVe,\n          taiKhoanNguoiDung: user.taiKhoan\n        },\n        headers: {\n          Authorization: `Bearer ${user.accessToken}`\n        }\n      });\n      alert(\"Mua Thàng Công rồi\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};","map":{"version":3,"sources":["/Users/mac/Downloads/reactjs-booking-13/src/redux/actions/booking.action.js"],"names":["axios","GET_LIST_TICKET","getTicketListAction","ticketList","type","payload","getTicketListAPI","code","dispatch","res","method","url","data","error","console","log","bookingTicketAPI","maLichChieu","danhSachVe","user","JSON","parse","localStorage","getItem","taiKhoanNguoiDung","taiKhoan","headers","Authorization","accessToken","alert"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,+BAAhC;;AACA,MAAMC,mBAAmB,GAAIC,UAAD,IAAgB;AAC1C,SAAO;AACLC,IAAAA,IAAI,EAAEH,eADD;AAELI,IAAAA,OAAO,EAAEF;AAFJ,GAAP;AAID,CALD;;AAMA,OAAO,MAAMG,gBAAgB,GAAIC,IAAD,IAAU;AACxC,SAAO,MAAOC,QAAP,IAAoB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMT,KAAK,CAAC;AACtBU,QAAAA,MAAM,EAAE,KADc;AAEtBC,QAAAA,GAAG,EAAG,qFAAoFJ,IAAK;AAFzE,OAAD,CAAvB;AAIAC,MAAAA,QAAQ,CAACN,mBAAmB,CAACO,GAAG,CAACG,IAAL,CAApB,CAAR;AACD,KAND,CAME,OAAOC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAvBD;AAwBD,CAzBM;AA2BP,OAAO,MAAMG,gBAAgB,GAAG,CAACC,WAAD,EAAcC,UAAd,KAA6B;AAC3D,SAAO,MAAOV,QAAP,IAAoB;AACzB,QAAI;AACF,YAAMW,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAAb;AACA,YAAMd,GAAG,GAAG,MAAMT,KAAK,CAAC;AACtBU,QAAAA,MAAM,EAAE,MADc;AAEtBC,QAAAA,GAAG,EAAE,0DAFiB;AAGtBC,QAAAA,IAAI,EAAE;AACJK,UAAAA,WADI;AAEJC,UAAAA,UAFI;AAGJM,UAAAA,iBAAiB,EAAEL,IAAI,CAACM;AAHpB,SAHgB;AAQtBC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASR,IAAI,CAACS,WAAY;AADnC;AARa,OAAD,CAAvB;AAYAC,MAAAA,KAAK,CAAC,oBAAD,CAAL;AACD,KAfD,CAeE,OAAOhB,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAnBD;AAoBD,CArBM","sourcesContent":["import axios from \"axios\";\r\nimport { GET_LIST_TICKET } from \"../constants/booking.constant\";\r\nconst getTicketListAction = (ticketList) => {\r\n  return {\r\n    type: GET_LIST_TICKET,\r\n    payload: ticketList,\r\n  };\r\n};\r\nexport const getTicketListAPI = (code) => {\r\n  return async (dispatch) => {\r\n    //   c1 - promise\r\n    // axios({\r\n    //   method: \"GET\",\r\n    //   url: `https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=16099`,\r\n    // })\r\n    //   .then((res) => {\r\n    //     console.log(res);\r\n    //     dispatch(getTicketListAction(res.data));\r\n    //   })\r\n    //   .catch((err) => {\r\n    //     console.log(err);\r\n    //   });\r\n    //   c2 - async / await\r\n    try {\r\n      const res = await axios({\r\n        method: \"GET\",\r\n        url: `https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${code}`,\r\n      });\r\n      dispatch(getTicketListAction(res.data));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n\r\nexport const bookingTicketAPI = (maLichChieu, danhSachVe) => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem(\"userLogin\"));\r\n      const res = await axios({\r\n        method: \"POST\",\r\n        url: \"https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/DatVe\",\r\n        data: {\r\n          maLichChieu,\r\n          danhSachVe,\r\n          taiKhoanNguoiDung: user.taiKhoan,\r\n        },\r\n        headers: {\r\n          Authorization: `Bearer ${user.accessToken}`,\r\n        },\r\n      });\r\n      alert(\"Mua Thàng Công rồi\");\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}